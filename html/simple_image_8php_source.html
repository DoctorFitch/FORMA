<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Forma Web: lib/simpleImage.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Forma Web
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('simple_image_8php_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">simpleImage.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="simple_image_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="namespaceabeautifulsite.html">   12</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceabeautifulsite.html">abeautifulsite</a>;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;use <a class="code" href="namespace_exception.html">Exception</a>;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html">   21</a></span>&#160;<span class="keyword">class </span><a class="code" href="namespace_simple_image.html">SimpleImage</a> {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a0e342ea32cccdc2c932ad23b9796a62a">   27</a></span>&#160;    <span class="keyword">public</span> $quality = 80;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a5795120b4b324bc4ca83f1e6fdce7d57">   29</a></span>&#160;    <span class="keyword">protected</span> $image, $filename, $original_info, <a class="code" href="classabeautifulsite_1_1_simple_image.html#a5795120b4b324bc4ca83f1e6fdce7d57">$width</a>, $height, $imagestring;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#ae69773d7ae7457ff1524174317f6ad62">   45</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#ae69773d7ae7457ff1524174317f6ad62">__construct</a>($filename = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $width = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $height = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $color = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordflow">if</span> ($filename) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            $this-&gt;<a class="code" href="wsc_8js.html#aee735810456865b981006adc11004e0f">load</a>($filename);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        } elseif ($width) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            $this-&gt;create($width, $height, $color);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a421831a265621325e1fdd19aace0c758">   58</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a421831a265621325e1fdd19aace0c758">__destruct</a>() {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">if</span>( $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> !== <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a> &amp;&amp; get_resource_type($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>) === <span class="stringliteral">&#39;gd&#39;</span> ) {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            imagedestroy($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a1e67e72870ddf87f3d16b3010cd7d3f2">   77</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a1e67e72870ddf87f3d16b3010cd7d3f2">adaptive_resize</a>($width, $height = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> $this-&gt;thumbnail($width, $height);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a0ed80eb3d0f683447f8c163aba89cc84">   89</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a0ed80eb3d0f683447f8c163aba89cc84">auto_orient</a>() {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span>(isset($this-&gt;original_info[<span class="stringliteral">&#39;exif&#39;</span>][<span class="stringliteral">&#39;Orientation&#39;</span>])) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordflow">switch</span> ($this-&gt;original_info[<span class="stringliteral">&#39;exif&#39;</span>][<span class="stringliteral">&#39;Orientation&#39;</span>]) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <span class="comment">// Do nothing</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    <span class="comment">// Flip horizontal</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    $this-&gt;flip(<span class="charliteral">&#39;x&#39;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    <span class="comment">// Rotate 180 counterclockwise</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    $this-&gt;rotate(-180);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    <span class="comment">// vertical flip</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    $this-&gt;flip(<span class="charliteral">&#39;y&#39;</span>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="comment">// Rotate 90 clockwise and flip vertically</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    $this-&gt;flip(<span class="charliteral">&#39;y&#39;</span>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    $this-&gt;rotate(90);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keywordflow">case</span> 6:</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    <span class="comment">// Rotate 90 clockwise</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    $this-&gt;rotate(90);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordflow">case</span> 7:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    <span class="comment">// Rotate 90 clockwise and flip horizontally</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    $this-&gt;flip(<span class="charliteral">&#39;x&#39;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    $this-&gt;rotate(90);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="keywordflow">case</span> 8:</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    <span class="comment">// Rotate 90 counterclockwise</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    $this-&gt;rotate(-90);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aaced3f2b7cc91ab8891d9248139338cf">  144</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aaced3f2b7cc91ab8891d9248139338cf">best_fit</a>($max_width, $max_height) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// If it already fits, there&#39;s nothing to do</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;width &lt;= $max_width &amp;&amp; $this-&gt;height &lt;= $max_height) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">// Determine aspect ratio</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        $aspect_ratio = $this-&gt;height / $this-&gt;width;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment">// Make width fit into new dimensions</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;width &gt; $max_width) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            $width = $max_width;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            $height = $width * $aspect_ratio;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            $width = $this-&gt;width;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            $height = $this-&gt;height;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">// Make height fit into new dimensions</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> ($height &gt; $max_height) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            $height = $max_height;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            $width = $height / $aspect_ratio;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="dygraph-combined_8min_8js.html#a1c7cf6a4eec3c3c8174f789e514bdd69">resize</a>($width, $height);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a693a4a7bc49924eb8c7ca586c3fbc2ba">  182</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a693a4a7bc49924eb8c7ca586c3fbc2ba">blur</a>($type = <span class="stringliteral">&#39;selective&#39;</span>, $passes = 1) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">switch</span> (strtolower($type)) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;gaussian&#39;</span>:</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                $type = IMG_FILTER_GAUSSIAN_BLUR;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                $type = IMG_FILTER_SELECTIVE_BLUR;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">for</span> ($i = 0; $i &lt; $passes; $i++) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $type);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#af571c7cddbd8021822dc8a6c36bd4059">  205</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#af571c7cddbd8021822dc8a6c36bd4059">brightness</a>($level) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_BRIGHTNESS, $this-&gt;keep_within($level, -255, 255));</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a7af23605eb273c1084cbbf092bf69c50">  219</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a7af23605eb273c1084cbbf092bf69c50">contrast</a>($level) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_CONTRAST, $this-&gt;keep_within($level, -100, 100));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#ab133aa5541f0ae97c49d5729ace52c62">  234</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#ab133aa5541f0ae97c49d5729ace52c62">colorize</a>($color, $opacity) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        $rgba = $this-&gt;normalize_color($color);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        $alpha = $this-&gt;keep_within(127 - (127 * $opacity), 0, 127);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_COLORIZE, $this-&gt;keep_within($rgba[<span class="charliteral">&#39;r&#39;</span>], 0, 255), $this-&gt;keep_within($rgba[<span class="charliteral">&#39;g&#39;</span>], 0, 255), $this-&gt;keep_within($rgba[<span class="charliteral">&#39;b&#39;</span>], 0, 255), $alpha);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aae0bbd9a1af614db7c62fcfcdb906ecb">  252</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aae0bbd9a1af614db7c62fcfcdb906ecb">create</a>($width, $height = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $color = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        $height = $height ?: $width;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        $this-&gt;width = $width;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        $this-&gt;height = $height;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = imagecreatetruecolor($width, $height);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        $this-&gt;original_info = array(</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="stringliteral">&#39;width&#39;</span> =&gt; $width,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="stringliteral">&#39;height&#39;</span> =&gt; $height,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="stringliteral">&#39;orientation&#39;</span> =&gt; $this-&gt;get_orientation(),</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="stringliteral">&#39;exif&#39;</span> =&gt; <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="stringliteral">&#39;format&#39;</span> =&gt; <span class="stringliteral">&#39;png&#39;</span>,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="stringliteral">&#39;mime&#39;</span> =&gt; <span class="stringliteral">&#39;image/png&#39;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        );</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">if</span> ($color) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            $this-&gt;fill($color);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a4363bcc58d31e100cc126fafad73ef1a">  286</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a4363bcc58d31e100cc126fafad73ef1a">crop</a>($x1, $y1, $x2, $y2) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">// Determine crop size</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> ($x2 &lt; $x1) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            list($x1, $x2) = array($x2, $x1);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">if</span> ($y2 &lt; $y1) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            list($y1, $y2) = array($y2, $y1);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        $crop_width = $x2 - $x1;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        $crop_height = $y2 - $y1;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">// Perform crop</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        $new = imagecreatetruecolor($crop_width, $crop_height);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        imagealphablending($new, <span class="keyword">false</span>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        imagesavealpha($new, <span class="keyword">true</span>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        imagecopyresampled($new, $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, 0, 0, $x1, $y1, $crop_width, $crop_height, $crop_width, $crop_height);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">// Update meta data</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        $this-&gt;width = $crop_width;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        $this-&gt;height = $crop_height;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = $new;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a525e84a6d2e7d8e5ce1a30250f7f3df1">  321</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a525e84a6d2e7d8e5ce1a30250f7f3df1">desaturate</a>($percentage = 100) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// Determine percentage</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        $percentage = $this-&gt;keep_within($percentage, 0, 100);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span>( $percentage === 100 ) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_GRAYSCALE);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="comment">// Make a desaturated copy of the image</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            $new = imagecreatetruecolor($this-&gt;width, $this-&gt;height);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            imagealphablending($new, <span class="keyword">false</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            imagesavealpha($new, <span class="keyword">true</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            imagecopy($new, $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, 0, 0, 0, 0, $this-&gt;width, $this-&gt;height);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            imagefilter($new, IMG_FILTER_GRAYSCALE);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="comment">// Merge with specified percentage</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            $this-&gt;imagecopymerge_alpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $new, 0, 0, 0, 0, $this-&gt;width, $this-&gt;height, $percentage);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            imagedestroy($new);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aed0804dc7416329172ab55bcbf1d41b7">  351</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aed0804dc7416329172ab55bcbf1d41b7">edges</a>() {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_EDGEDETECT);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aabc8c1473621bfe3e064dd0a756c935e">  362</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aabc8c1473621bfe3e064dd0a756c935e">emboss</a>() {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_EMBOSS);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aaa59492eca3655d941d74c92eff212e9">  376</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aaa59492eca3655d941d74c92eff212e9">fill</a>($color = <span class="stringliteral">&#39;#000000&#39;</span>) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        $rgba = $this-&gt;normalize_color($color);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        $fill_color = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        imagealphablending($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        imagesavealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        imagefilledrectangle($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, 0, 0, $this-&gt;width, $this-&gt;height, $fill_color);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a8336e743a25f5301892696cd7c394f1f">  396</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a8336e743a25f5301892696cd7c394f1f">fit_to_height</a>($height) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        $aspect_ratio = $this-&gt;height / $this-&gt;width;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        $width = $height / $aspect_ratio;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="dygraph-combined_8min_8js.html#a1c7cf6a4eec3c3c8174f789e514bdd69">resize</a>($width, $height);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#ac94ed3e74548edbf50883dc09790ab16">  413</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#ac94ed3e74548edbf50883dc09790ab16">fit_to_width</a>($width) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        $aspect_ratio = $this-&gt;height / $this-&gt;width;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        $height = $width * $aspect_ratio;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="dygraph-combined_8min_8js.html#a1c7cf6a4eec3c3c8174f789e514bdd69">resize</a>($width, $height);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#afbed21df0630ae4d62c6ba38edd6f9d1">  430</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#afbed21df0630ae4d62c6ba38edd6f9d1">flip</a>($direction) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        $new = imagecreatetruecolor($this-&gt;width, $this-&gt;height);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        imagealphablending($new, <span class="keyword">false</span>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        imagesavealpha($new, <span class="keyword">true</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">switch</span> (strtolower($direction)) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;y&#39;</span>:</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">for</span> ($y = 0; $y &lt; $this-&gt;height; $y++) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    imagecopy($new, $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, 0, $y, 0, $this-&gt;height - $y - 1, $this-&gt;width, 1);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="keywordflow">for</span> ($x = 0; $x &lt; $this-&gt;width; $x++) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    imagecopy($new, $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $x, 0, $this-&gt;width - $x - 1, 0, 1, $this-&gt;height);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = $new;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a0acd49b80218568ea04e7a5886373c54">  461</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a0acd49b80218568ea04e7a5886373c54">get_height</a>() {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">return</span> $this-&gt;height;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a6bb3cbd0b8cb4156b2521365fca79529">  471</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a6bb3cbd0b8cb4156b2521365fca79529">get_orientation</a>() {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (imagesx($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>) &gt; imagesy($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>)) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;landscape&#39;</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> (imagesx($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>) &lt; imagesy($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>)) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;portrait&#39;</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;square&#39;</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a2514a0242e2b19b8b5fcbd7a79db5527">  498</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a2514a0242e2b19b8b5fcbd7a79db5527">get_original_info</a>() {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">return</span> $this-&gt;original_info;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#abb10ccd258503d273acaf265bf1b1535">  508</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#abb10ccd258503d273acaf265bf1b1535">get_width</a>() {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">return</span> $this-&gt;width;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a70a743c63f97d5bbfdb2cdab7d186938">  518</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a70a743c63f97d5bbfdb2cdab7d186938">invert</a>() {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_NEGATE);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a585c262d16bad21a05af8804df8372b2">  532</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a585c262d16bad21a05af8804df8372b2">load</a>($filename) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// Require GD library</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> (!extension_loaded(<span class="stringliteral">&#39;gd&#39;</span>)) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Required extension GD is not loaded.&#39;</span>);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        $this-&gt;filename = $filename;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">return</span> $this-&gt;get_meta_data();</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a21c21cee2c0a9cd9e8965a684f50e8e8">  550</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a21c21cee2c0a9cd9e8965a684f50e8e8">load_base64</a>($base64string) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> (!extension_loaded(<span class="stringliteral">&#39;gd&#39;</span>)) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Required extension GD is not loaded.&#39;</span>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="comment">//remove data URI scheme and spaces from base64 string then decode it</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        $this-&gt;imagestring = base64_decode(str_replace(<span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;+&#39;</span>,preg_replace(<span class="stringliteral">&#39;#^data:image/[^;]+;base64,#&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $base64string)));</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = imagecreatefromstring($this-&gt;imagestring);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">return</span> $this-&gt;get_meta_data();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a4f2623f77a0eb2993c39668604b9d028">  566</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a4f2623f77a0eb2993c39668604b9d028">mean_remove</a>() {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_MEAN_REMOVAL);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#add5b914f35ec96d98f9e3026693a627d">  579</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#add5b914f35ec96d98f9e3026693a627d">opacity</a>($opacity) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="comment">// Determine opacity</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        $opacity = $this-&gt;keep_within($opacity, 0, 1) * 100;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="comment">// Make a copy of the image</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        $copy = imagecreatetruecolor($this-&gt;width, $this-&gt;height);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        imagealphablending($copy, <span class="keyword">false</span>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        imagesavealpha($copy, <span class="keyword">true</span>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        imagecopy($copy, $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, 0, 0, 0, 0, $this-&gt;width, $this-&gt;height);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">// Create transparent layer</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        $this-&gt;create($this-&gt;width, $this-&gt;height, array(0, 0, 0, 127));</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">// Merge with specified opacity</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        $this-&gt;imagecopymerge_alpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $copy, 0, 0, 0, 0, $this-&gt;width, $this-&gt;height, $opacity);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        imagedestroy($copy);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a1d8a0c4ee571db448e556caed12028d1">  610</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a1d8a0c4ee571db448e556caed12028d1">output</a>($format = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $quality = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="comment">// Determine quality</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        $quality = $quality ?: $this-&gt;quality;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">// Determine mimetype</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">switch</span> (strtolower($format)) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                $mimetype = <span class="stringliteral">&#39;image/gif&#39;</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpg&#39;</span>:</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                imageinterlace($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                $mimetype = <span class="stringliteral">&#39;image/jpeg&#39;</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                $mimetype = <span class="stringliteral">&#39;image/png&#39;</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                $info = (empty($this-&gt;imagestring)) ? getimagesize($this-&gt;filename) : getimagesizefromstring($this-&gt;imagestring);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                $mimetype = $info[<span class="stringliteral">&#39;mime&#39;</span>];</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                unset($info);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="comment">// Output the image</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        header(<span class="stringliteral">&#39;Content-Type: &#39;</span>.$mimetype);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">switch</span> ($mimetype) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/gif&#39;</span>:</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                imagegif($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/jpeg&#39;</span>:</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                imageinterlace($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                imagejpeg($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, round($quality));</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/png&#39;</span>:</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                imagepng($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, round(9 * $quality / 100));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Unsupported image format: &#39;</span>.$this-&gt;filename);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#acd08ab8d9a2213db91dc8a4cd533fedc">  664</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#acd08ab8d9a2213db91dc8a4cd533fedc">output_base64</a>($format = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $quality = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="comment">// Determine quality</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        $quality = $quality ?: $this-&gt;quality;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">// Determine mimetype</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">switch</span> (strtolower($format)) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                $mimetype = <span class="stringliteral">&#39;image/gif&#39;</span>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpg&#39;</span>:</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                imageinterlace($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                $mimetype = <span class="stringliteral">&#39;image/jpeg&#39;</span>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                $mimetype = <span class="stringliteral">&#39;image/png&#39;</span>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                $info = getimagesize($this-&gt;filename);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                $mimetype = $info[<span class="stringliteral">&#39;mime&#39;</span>];</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                unset($info);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment">// Output the image</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        ob_start();</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">switch</span> ($mimetype) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/gif&#39;</span>:</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                imagegif($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/jpeg&#39;</span>:</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                imagejpeg($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, round($quality));</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/png&#39;</span>:</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                imagepng($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, round(9 * $quality / 100));</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Unsupported image format: &#39;</span>.$this-&gt;filename);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        $image_data = ob_get_contents();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        ob_end_clean();</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="comment">// Returns formatted string for img src</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;data:&#39;</span>.$mimetype.<span class="stringliteral">&#39;;base64,&#39;</span>.base64_encode($image_data);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#ab2dbc20c617a63e98ab1249031a4f65a">  727</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#ab2dbc20c617a63e98ab1249031a4f65a">overlay</a>($overlay, $position = <span class="stringliteral">&#39;center&#39;</span>, $opacity = 1, $x_offset = 0, $y_offset = 0) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="comment">// Load overlay image</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span>( !($overlay instanceof <a class="code" href="namespace_simple_image.html">SimpleImage</a>) ) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            $overlay = <span class="keyword">new</span> SimpleImage($overlay);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="comment">// Convert opacity</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        $opacity = $opacity * 100;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="comment">// Determine position</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">switch</span> (strtolower($position)) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top left&#39;</span>:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                $x = 0 + $x_offset;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                $y = 0 + $y_offset;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top right&#39;</span>:</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                $x = $this-&gt;width - $overlay-&gt;width + $x_offset;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                $y = 0 + $y_offset;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top&#39;</span>:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                $x = ($this-&gt;width / 2) - ($overlay-&gt;width / 2) + $x_offset;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                $y = 0 + $y_offset;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom left&#39;</span>:</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                $x = 0 + $x_offset;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                $y = $this-&gt;height - $overlay-&gt;height + $y_offset;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom right&#39;</span>:</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                $x = $this-&gt;width - $overlay-&gt;width + $x_offset;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                $y = $this-&gt;height - $overlay-&gt;height + $y_offset;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom&#39;</span>:</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                $x = ($this-&gt;width / 2) - ($overlay-&gt;width / 2) + $x_offset;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                $y = $this-&gt;height - $overlay-&gt;height + $y_offset;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;left&#39;</span>:</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                $x = 0 + $x_offset;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                $y = ($this-&gt;height / 2) - ($overlay-&gt;height / 2) + $y_offset;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;right&#39;</span>:</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                $x = $this-&gt;width - $overlay-&gt;width + $x_offset;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                $y = ($this-&gt;height / 2) - ($overlay-&gt;height / 2) + $y_offset;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;center&#39;</span>:</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                $x = ($this-&gt;width / 2) - ($overlay-&gt;width / 2) + $x_offset;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                $y = ($this-&gt;height / 2) - ($overlay-&gt;height / 2) + $y_offset;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="comment">// Perform the overlay</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        $this-&gt;imagecopymerge_alpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $overlay-&gt;image, $x, $y, 0, 0, $overlay-&gt;width, $overlay-&gt;height, $opacity);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a682af070180fbd1f3734653757403139">  793</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a682af070180fbd1f3734653757403139">pixelate</a>($block_size = 10) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_PIXELATE, $block_size, <span class="keyword">true</span>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aa22cf38c82a9f8234d99293ada1f70fa">  807</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aa22cf38c82a9f8234d99293ada1f70fa">resize</a>($width, $height) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">// Generate new GD image</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        $new = imagecreatetruecolor($width, $height);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">if</span>( $this-&gt;original_info[<span class="stringliteral">&#39;format&#39;</span>] === <span class="stringliteral">&#39;gif&#39;</span> ) {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="comment">// Preserve transparency in GIFs</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            $transparent_index = imagecolortransparent($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            $palletsize = imagecolorstotal($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">if</span> ($transparent_index &gt;= 0 &amp;&amp; $transparent_index &lt; $palletsize) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                $transparent_color = imagecolorsforindex($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $transparent_index);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                $transparent_index = imagecolorallocate($new, $transparent_color[<span class="stringliteral">&#39;red&#39;</span>], $transparent_color[<span class="stringliteral">&#39;green&#39;</span>], $transparent_color[<span class="stringliteral">&#39;blue&#39;</span>]);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                imagefill($new, 0, 0, $transparent_index);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                imagecolortransparent($new, $transparent_index);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="comment">// Preserve transparency in PNGs (benign for JPEGs)</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            imagealphablending($new, <span class="keyword">false</span>);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            imagesavealpha($new, <span class="keyword">true</span>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">// Resize</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        imagecopyresampled($new, $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, 0, 0, 0, 0, $width, $height, $this-&gt;width, $this-&gt;height);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="comment">// Update meta data</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        $this-&gt;width = $width;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        $this-&gt;height = $height;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = $new;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a2c6d126f21bff5223d7d7f9bdb54cf79">  850</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a2c6d126f21bff5223d7d7f9bdb54cf79">rotate</a>($angle, $bg_color = <span class="stringliteral">&#39;#000000&#39;</span>) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="comment">// Perform the rotation</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        $rgba = $this-&gt;normalize_color($bg_color);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        $bg_color = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        $new = imagerotate($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, -($this-&gt;keep_within($angle, -360, 360)), $bg_color);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        imagesavealpha($new, <span class="keyword">true</span>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        imagealphablending($new, <span class="keyword">true</span>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="comment">// Update meta data</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        $this-&gt;width = imagesx($new);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        $this-&gt;height = imagesy($new);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = $new;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a0d40c1a117d25c5bae5f30edfdebefe8">  881</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a0d40c1a117d25c5bae5f30edfdebefe8">save</a>($filename = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $quality = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $format = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="comment">// Determine quality, filename, and format</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        $quality = $quality ?: $this-&gt;quality;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        $filename = $filename ?: $this-&gt;filename;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">if</span>( !$format ) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            $format = $this-&gt;file_ext($filename) ?: $this-&gt;original_info[<span class="stringliteral">&#39;format&#39;</span>];</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="comment">// Create the image</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">switch</span> (strtolower($format)) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                $result = imagegif($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $filename);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpg&#39;</span>:</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                imageinterlace($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                $result = imagejpeg($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $filename, round($quality));</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                $result = imagepng($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $filename, round(9 * $quality / 100));</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Unsupported format&#39;</span>);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        }</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">if</span> (!$result) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Unable to save image: &#39;</span> . $filename);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a4723159606519b101e408854bc65ee35">  921</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a4723159606519b101e408854bc65ee35">sepia</a>() {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_GRAYSCALE);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_COLORIZE, 100, 50, 0);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#afc92209cb2a19193d46a9338b13a3bb9">  933</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#afc92209cb2a19193d46a9338b13a3bb9">sketch</a>() {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_MEAN_REMOVAL);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a7ebc6366f3da2bf2af1608663fdb7a09">  946</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a7ebc6366f3da2bf2af1608663fdb7a09">smooth</a>($level) {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        imagefilter($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, IMG_FILTER_SMOOTH, $this-&gt;keep_within($level, -10, 10));</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a7b75b8778b5090f902def6b3d0ee0fcd">  970</a></span>&#160;    <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a7b75b8778b5090f902def6b3d0ee0fcd">text</a>($text, $font_file, $font_size = 12, $color = <span class="stringliteral">&#39;#000000&#39;</span>, $position = <span class="stringliteral">&#39;center&#39;</span>, $x_offset = 0, $y_offset = 0, $stroke_color = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $stroke_size = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $alignment = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $letter_spacing = 0) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="comment">// todo - this method could be improved to support the text angle</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        $angle = 0;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="comment">// Determine text color</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span>(is_array($color)) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">foreach</span>($color as $var) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                $rgba = $this-&gt;normalize_color($var);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                $color_arr[] = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            $rgba = $this-&gt;normalize_color($color);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            $color_arr[] = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        }</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="comment">// Determine textbox size</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        $box = imagettfbbox($font_size, $angle, $font_file, $text);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">if</span> (!$box) {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Unable to load font: &#39;</span>.$font_file);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        $box_width = abs($box[6] - $box[2]);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        $box_height = abs($box[7] - $box[1]);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="comment">// Determine position</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">switch</span> (strtolower($position)) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top left&#39;</span>:</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                $x = 0 + $x_offset;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                $y = 0 + $y_offset + $box_height;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top right&#39;</span>:</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                $x = $this-&gt;width - $box_width + $x_offset;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                $y = 0 + $y_offset + $box_height;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top&#39;</span>:</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                $x = ($this-&gt;width / 2) - ($box_width / 2) + $x_offset;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                $y = 0 + $y_offset + $box_height;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom left&#39;</span>:</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                $x = 0 + $x_offset;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                $y = $this-&gt;height - $box_height + $y_offset + $box_height;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom right&#39;</span>:</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                $x = $this-&gt;width - $box_width + $x_offset;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                $y = $this-&gt;height - $box_height + $y_offset + $box_height;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom&#39;</span>:</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                $x = ($this-&gt;width / 2) - ($box_width / 2) + $x_offset;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                $y = $this-&gt;height - $box_height + $y_offset + $box_height;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;left&#39;</span>:</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                $x = 0 + $x_offset;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                $y = ($this-&gt;height / 2) - (($box_height / 2) - $box_height) + $y_offset;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;right&#39;</span>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                $x = $this-&gt;width - $box_width + $x_offset;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                $y = ($this-&gt;height / 2) - (($box_height / 2) - $box_height) + $y_offset;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;center&#39;</span>:</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                $x = ($this-&gt;width / 2) - ($box_width / 2) + $x_offset;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                $y = ($this-&gt;height / 2) - (($box_height / 2) - $box_height) + $y_offset;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">if</span>($alignment === <span class="stringliteral">&quot;left&quot;</span>) {</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="comment">// Left aligned text</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            $x = -($x * 2);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>($alignment === <span class="stringliteral">&quot;right&quot;</span>) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="comment">// Right aligned text</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            $dimensions = imagettfbbox($font_size, $angle, $font_file, $text);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            $alignment_offset = abs($dimensions[4] - $dimensions[0]);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            $x = -(($x * 2) + $alignment_offset);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="comment">// Add the text</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        imagesavealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        imagealphablending($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">if</span>(isset($stroke_color) &amp;&amp; isset($stroke_size)) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <span class="comment">// Text with stroke</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="keywordflow">if</span>(is_array($color) || is_array($stroke_color)) {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                <span class="comment">// Multi colored text and/or multi colored stroke</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <span class="keywordflow">if</span>(is_array($stroke_color)) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                    <span class="keywordflow">foreach</span>($stroke_color as $key =&gt; $var) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                        $rgba = $this-&gt;normalize_color($stroke_color[$key]);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                        $stroke_color[$key] = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                    }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    $rgba = $this-&gt;normalize_color($stroke_color);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    $stroke_color = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                $array_of_letters = str_split($text, 1);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="keywordflow">foreach</span>($array_of_letters as $key =&gt; $var) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                    <span class="keywordflow">if</span>($key &gt; 0) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                        $dimensions = imagettfbbox($font_size, $angle, $font_file, $array_of_letters[$key - 1]);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                        $x += abs($dimensions[4] - $dimensions[0]) + $letter_spacing;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                    <span class="comment">// If the next letter is empty, we just move forward to the next letter</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                    <span class="keywordflow">if</span>($var !== <span class="stringliteral">&quot; &quot;</span>) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                        $this-&gt;imagettfstroketext($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $font_size, $angle, $x, $y, current($color_arr), current($stroke_color), $stroke_size, $font_file, $var);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                        <span class="comment">// #000 is 0, black will reset the array so we write it this way</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="dygraph-combined_8min_8js.html#ad725e11734b00f9bae46d9ca3cce440a">next</a>($color_arr) === <span class="keyword">false</span>) {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                            <a class="code" href="raphael_8min_8js.html#a5d78e12089c0fc176ed4311da69e728d">reset</a>($color_arr);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                        }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                        <span class="comment">// #000 is 0, black will reset the array so we write it this way</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="dygraph-combined_8min_8js.html#ad725e11734b00f9bae46d9ca3cce440a">next</a>($stroke_color) === <span class="keyword">false</span>) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                            <a class="code" href="raphael_8min_8js.html#a5d78e12089c0fc176ed4311da69e728d">reset</a>($stroke_color);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                        }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                $rgba = $this-&gt;normalize_color($stroke_color);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                $stroke_color = imagecolorallocatealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $rgba[<span class="charliteral">&#39;r&#39;</span>], $rgba[<span class="charliteral">&#39;g&#39;</span>], $rgba[<span class="charliteral">&#39;b&#39;</span>], $rgba[<span class="charliteral">&#39;a&#39;</span>]);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                $this-&gt;imagettfstroketext($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $font_size, $angle, $x, $y, $color_arr[0], $stroke_color, $stroke_size, $font_file, $text);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <span class="comment">// Text without stroke</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <span class="keywordflow">if</span>(is_array($color)) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                <span class="comment">// Multi colored text</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                $array_of_letters = str_split($text, 1);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                <span class="keywordflow">foreach</span>($array_of_letters as $key =&gt; $var) {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                    <span class="keywordflow">if</span>($key &gt; 0) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                        $dimensions = imagettfbbox($font_size, $angle, $font_file, $array_of_letters[$key - 1]);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                        $x += abs($dimensions[4] - $dimensions[0]) + $letter_spacing;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                    }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                    <span class="comment">// If the next letter is empty, we just move forward to the next letter</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                    <span class="keywordflow">if</span>($var !== <span class="stringliteral">&quot; &quot;</span>) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                        imagettftext($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $font_size, $angle, $x, $y, current($color_arr), $font_file, $var);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                        <span class="comment">// #000 is 0, black will reset the array so we write it this way</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="dygraph-combined_8min_8js.html#ad725e11734b00f9bae46d9ca3cce440a">next</a>($color_arr) === <span class="keyword">false</span>) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            <a class="code" href="raphael_8min_8js.html#a5d78e12089c0fc176ed4311da69e728d">reset</a>($color_arr);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                        }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                    }</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                imagettftext($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, $font_size, $angle, $x, $y, $color_arr[0], $font_file, $text);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a8c5d5fb41d561409ca31b288b70d239e"> 1146</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a8c5d5fb41d561409ca31b288b70d239e">thumbnail</a>($width, $height = <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>, $focal = <span class="stringliteral">&#39;center&#39;</span>) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="comment">// Determine height</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        $height = $height ?: $width;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="comment">// Determine aspect ratios</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        $current_aspect_ratio = $this-&gt;height / $this-&gt;width;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        $new_aspect_ratio = $height / $width;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="comment">// Fit to height/width</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="keywordflow">if</span> ($new_aspect_ratio &gt; $current_aspect_ratio) {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            $this-&gt;fit_to_height($height);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            $this-&gt;fit_to_width($width);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">switch</span>(strtolower($focal)) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top&#39;</span>:</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                $left = floor(($this-&gt;width / 2) - ($width / 2));</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                $right = $width + $left;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                $top = 0;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                $bottom = $height;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom&#39;</span>:</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                $left = floor(($this-&gt;width / 2) - ($width / 2));</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                $right = $width + $left;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                $top = $this-&gt;height - $height;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                $bottom = $this-&gt;height;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;left&#39;</span>:</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                $left = 0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                $right = $width;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                $top = floor(($this-&gt;height / 2) - ($height / 2));</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                $bottom = $height + $top;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;right&#39;</span>:</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                $left = $this-&gt;width - $width;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                $right = $this-&gt;width;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                $top = floor(($this-&gt;height / 2) - ($height / 2));</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                $bottom = $height + $top;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top left&#39;</span>:</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                $left = 0;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                $right = $width;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                $top = 0;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                $bottom = $height;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;top right&#39;</span>:</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                $left = $this-&gt;width - $width;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                $right = $this-&gt;width;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                $top = 0;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                $bottom = $height;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom left&#39;</span>:</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                $left = 0;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                $right = $width;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                $top = $this-&gt;height - $height;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                $bottom = $this-&gt;height;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;bottom right&#39;</span>:</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                $left = $this-&gt;width - $width;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                $right = $this-&gt;width;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                $top = $this-&gt;height - $height;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                $bottom = $this-&gt;height;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;center&#39;</span>:</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                $left = floor(($this-&gt;width / 2) - ($width / 2));</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                $right = $width + $left;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                $top = floor(($this-&gt;height / 2) - ($height / 2));</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                $bottom = $height + $top;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="comment">// Return trimmed image</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">return</span> $this-&gt;crop($left, $top, $right, $bottom);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#ae0e4ad34b7a0b6a4b7e582c4676bd60f"> 1232</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#ae0e4ad34b7a0b6a4b7e582c4676bd60f">file_ext</a>($filename) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&#39;/\./&#39;</span>, $filename)) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordflow">return</span> preg_replace(<span class="stringliteral">&#39;/^.*\./&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $filename);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a6ed959330a006f41f6c48bcbb9aa2f86"> 1251</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a6ed959330a006f41f6c48bcbb9aa2f86">get_meta_data</a>() {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="comment">//gather meta data</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="keywordflow">if</span>(empty($this-&gt;imagestring)) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            $info = getimagesize($this-&gt;filename);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <span class="keywordflow">switch</span> ($info[<span class="stringliteral">&#39;mime&#39;</span>]) {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/gif&#39;</span>:</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                    $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = imagecreatefromgif($this-&gt;filename);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/jpeg&#39;</span>:</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                    $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = imagecreatefromjpeg($this-&gt;filename);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;image/png&#39;</span>:</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                    $this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a> = imagecreatefrompng($this-&gt;filename);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;Invalid image: &#39;</span>.$this-&gt;filename);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        } elseif (function_exists(<span class="stringliteral">&#39;getimagesizefromstring&#39;</span>)) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            $info = getimagesizefromstring($this-&gt;imagestring);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="namespace_exception.html">Exception</a>(<span class="stringliteral">&#39;PHP 5.4 is required to use method getimagesizefromstring&#39;</span>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        $this-&gt;original_info = array(</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            <span class="stringliteral">&#39;width&#39;</span> =&gt; $info[0],</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <span class="stringliteral">&#39;height&#39;</span> =&gt; $info[1],</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="stringliteral">&#39;orientation&#39;</span> =&gt; $this-&gt;get_orientation(),</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <span class="stringliteral">&#39;exif&#39;</span> =&gt; function_exists(<span class="stringliteral">&#39;exif_read_data&#39;</span>) &amp;&amp; $info[<span class="stringliteral">&#39;mime&#39;</span>] === <span class="stringliteral">&#39;image/jpeg&#39;</span> &amp;&amp; $this-&gt;imagestring === <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a> ? $this-&gt;exif = @exif_read_data($this-&gt;filename) : <a class="code" href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a>,</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="stringliteral">&#39;format&#39;</span> =&gt; preg_replace(<span class="stringliteral">&#39;/^image\//&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $info[<span class="stringliteral">&#39;mime&#39;</span>]),</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="stringliteral">&#39;mime&#39;</span> =&gt; $info[<span class="stringliteral">&#39;mime&#39;</span>]</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        );</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        $this-&gt;width = $info[0];</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        $this-&gt;height = $info[1];</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        imagesavealpha($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        imagealphablending($this-&gt;<a class="code" href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordflow">return</span> $this;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a725590e68594a12d631830dfce494571"> 1310</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a725590e68594a12d631830dfce494571">imagecopymerge_alpha</a>($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h, $pct) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="comment">// Get image width and height and percentage</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        $pct /= 100;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        $w = imagesx($src_im);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        $h = imagesy($src_im);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="comment">// Turn alpha blending off</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        imagealphablending($src_im, <span class="keyword">false</span>);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="comment">// Find the most opaque pixel in the image (the one with the smallest alpha value)</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        $minalpha = 127;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordflow">for</span> ($x = 0; $x &lt; $w; $x++) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">for</span> ($y = 0; $y &lt; $h; $y++) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                $alpha = (imagecolorat($src_im, $x, $y) &gt;&gt; 24) &amp; 0xFF;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="keywordflow">if</span> ($alpha &lt; $minalpha) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                    $minalpha = $alpha;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            }</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        }</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="comment">// Loop through image pixels and modify alpha for each</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="keywordflow">for</span> ($x = 0; $x &lt; $w; $x++) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            <span class="keywordflow">for</span> ($y = 0; $y &lt; $h; $y++) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                <span class="comment">// Get current alpha value (represents the TANSPARENCY!)</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                $colorxy = imagecolorat($src_im, $x, $y);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                $alpha = ($colorxy &gt;&gt; 24) &amp; 0xFF;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                <span class="comment">// Calculate new alpha</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                <span class="keywordflow">if</span> ($minalpha !== 127) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                    $alpha = 127 + 127 * $pct * ($alpha - 127) / (127 - $minalpha);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                    $alpha += 127 * $pct;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="comment">// Get the color index with new alpha</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                $alphacolorxy = imagecolorallocatealpha($src_im, ($colorxy &gt;&gt; 16) &amp; 0xFF, ($colorxy &gt;&gt; 8) &amp; 0xFF, $colorxy &amp; 0xFF, $alpha);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                <span class="comment">// Set pixel with the new color + opacity</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                <span class="keywordflow">if</span> (!imagesetpixel($src_im, $x, $y, $alphacolorxy)) {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="comment">// Copy it</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        imagesavealpha($dst_im, <span class="keyword">true</span>);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        imagealphablending($dst_im, <span class="keyword">true</span>);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        imagesavealpha($src_im, <span class="keyword">true</span>);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        imagealphablending($src_im, <span class="keyword">true</span>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        imagecopy($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#ac4cc9fdb8b47c6be2f2887a0fc00a793"> 1378</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#ac4cc9fdb8b47c6be2f2887a0fc00a793">imagettfstroketext</a>(&amp;$image, $size, $angle, $x, $y, &amp;$textcolor, &amp;$strokecolor, $stroke_size, $fontfile, $text) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">for</span>( $c1 = ($x - abs($stroke_size)); $c1 &lt;= ($x + abs($stroke_size)); $c1++ ) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            <span class="keywordflow">for</span>($c2 = ($y - abs($stroke_size)); $c2 &lt;= ($y + abs($stroke_size)); $c2++) {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                $bg = imagettftext($image, $size, $angle, $c1, $c2, $strokecolor, $fontfile, $text);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        }</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="keywordflow">return</span> imagettftext($image, $size, $angle, $x, $y, $textcolor, $fontfile, $text);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    }</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#a4b91068cc14980876d02cb4d51996c36"> 1399</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#a4b91068cc14980876d02cb4d51996c36">keep_within</a>($value, $min, $max) {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordflow">if</span> ($value &lt; $min) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <span class="keywordflow">return</span> $min;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <span class="keywordflow">if</span> ($value &gt; $max) {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <span class="keywordflow">return</span> $max;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        }</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keywordflow">return</span> $value;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"><a class="line" href="classabeautifulsite_1_1_simple_image.html#aa0cce094a549fbed2a9e7288bd15221f"> 1422</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="classabeautifulsite_1_1_simple_image.html#aa0cce094a549fbed2a9e7288bd15221f">normalize_color</a>($color) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">if</span> (is_string($color)) {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            $color = trim($color, <span class="charliteral">&#39;#&#39;</span>);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="keywordflow">if</span> (strlen($color) == 6) {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                list($r, $g, $b) = array(</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                    $color[0].$color[1],</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                    $color[2].$color[3],</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                    $color[4].$color[5]</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                );</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            } elseif (strlen($color) == 3) {</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                list($r, $g, $b) = array(</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                    $color[0].$color[0],</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                    $color[1].$color[1],</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                    $color[2].$color[2]</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                );</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            }</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            <span class="keywordflow">return</span> array(</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                <span class="charliteral">&#39;r&#39;</span> =&gt; hexdec($r),</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                <span class="charliteral">&#39;g&#39;</span> =&gt; hexdec($g),</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                <span class="charliteral">&#39;b&#39;</span> =&gt; hexdec($b),</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                <span class="charliteral">&#39;a&#39;</span> =&gt; 0</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            );</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        } elseif (is_array($color) &amp;&amp; (count($color) == 3 || count($color) == 4)) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="keywordflow">if</span> (isset($color[<span class="charliteral">&#39;r&#39;</span>], $color[<span class="charliteral">&#39;g&#39;</span>], $color[<span class="charliteral">&#39;b&#39;</span>])) {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                <span class="keywordflow">return</span> array(</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                    <span class="charliteral">&#39;r&#39;</span> =&gt; $this-&gt;keep_within($color[<span class="charliteral">&#39;r&#39;</span>], 0, 255),</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                    <span class="charliteral">&#39;g&#39;</span> =&gt; $this-&gt;keep_within($color[<span class="charliteral">&#39;g&#39;</span>], 0, 255),</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                    <span class="charliteral">&#39;b&#39;</span> =&gt; $this-&gt;keep_within($color[<span class="charliteral">&#39;b&#39;</span>], 0, 255),</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                    <span class="charliteral">&#39;a&#39;</span> =&gt; $this-&gt;keep_within(isset($color[<span class="charliteral">&#39;a&#39;</span>]) ? $color[<span class="charliteral">&#39;a&#39;</span>] : 0, 0, 127)</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                );</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            } elseif (isset($color[0], $color[1], $color[2])) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                <span class="keywordflow">return</span> array(</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                    <span class="charliteral">&#39;r&#39;</span> =&gt; $this-&gt;keep_within($color[0], 0, 255),</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                    <span class="charliteral">&#39;g&#39;</span> =&gt; $this-&gt;keep_within($color[1], 0, 255),</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                    <span class="charliteral">&#39;b&#39;</span> =&gt; $this-&gt;keep_within($color[2], 0, 255),</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                    <span class="charliteral">&#39;a&#39;</span> =&gt; $this-&gt;keep_within(isset($color[3]) ? $color[3] : 0, 0, 127)</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                );</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        }</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;}</div><div class="ttc" id="classabeautifulsite_1_1_simple_image_html_ab2dbc20c617a63e98ab1249031a4f65a"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#ab2dbc20c617a63e98ab1249031a4f65a">abeautifulsite\SimpleImage\overlay</a></div><div class="ttdeci">overlay($overlay, $position= 'center', $opacity=1, $x_offset=0, $y_offset=0)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00727">simpleImage.php:727</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_add5b914f35ec96d98f9e3026693a627d"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#add5b914f35ec96d98f9e3026693a627d">abeautifulsite\SimpleImage\opacity</a></div><div class="ttdeci">opacity($opacity)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00579">simpleImage.php:579</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_ac4cc9fdb8b47c6be2f2887a0fc00a793"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#ac4cc9fdb8b47c6be2f2887a0fc00a793">abeautifulsite\SimpleImage\imagettfstroketext</a></div><div class="ttdeci">imagettfstroketext(&amp;$image, $size, $angle, $x, $y, &amp;$textcolor, &amp;$strokecolor, $stroke_size, $fontfile, $text)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01378">simpleImage.php:1378</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a4b91068cc14980876d02cb4d51996c36"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a4b91068cc14980876d02cb4d51996c36">abeautifulsite\SimpleImage\keep_within</a></div><div class="ttdeci">keep_within($value, $min, $max)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01399">simpleImage.php:1399</a></div></div>
<div class="ttc" id="pace_8min_8js_html_a26957462b15efc9bc17d6143ace1006e"><div class="ttname"><a href="pace_8min_8js.html#a26957462b15efc9bc17d6143ace1006e">null</a></div><div class="ttdeci">Pace null</div><div class="ttdef"><b>Definition:</b> <a href="pace_8min_8js_source.html#l00002">pace.min.js:2</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aa22cf38c82a9f8234d99293ada1f70fa"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aa22cf38c82a9f8234d99293ada1f70fa">abeautifulsite\SimpleImage\resize</a></div><div class="ttdeci">resize($width, $height)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00807">simpleImage.php:807</a></div></div>
<div class="ttc" id="raphael_8min_8js_html_a5d78e12089c0fc176ed4311da69e728d"><div class="ttname"><a href="raphael_8min_8js.html#a5d78e12089c0fc176ed4311da69e728d">reset</a></div><div class="ttdeci">c c c c c c getColor reset</div><div class="ttdef"><b>Definition:</b> <a href="raphael_8min_8js_source.html#l00001">raphael.min.js:1</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a70a743c63f97d5bbfdb2cdab7d186938"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a70a743c63f97d5bbfdb2cdab7d186938">abeautifulsite\SimpleImage\invert</a></div><div class="ttdeci">invert()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00518">simpleImage.php:518</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a421831a265621325e1fdd19aace0c758"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a421831a265621325e1fdd19aace0c758">abeautifulsite\SimpleImage\__destruct</a></div><div class="ttdeci">__destruct()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00058">simpleImage.php:58</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a4363bcc58d31e100cc126fafad73ef1a"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a4363bcc58d31e100cc126fafad73ef1a">abeautifulsite\SimpleImage\crop</a></div><div class="ttdeci">crop($x1, $y1, $x2, $y2)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00286">simpleImage.php:286</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a2c6d126f21bff5223d7d7f9bdb54cf79"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a2c6d126f21bff5223d7d7f9bdb54cf79">abeautifulsite\SimpleImage\rotate</a></div><div class="ttdeci">rotate($angle, $bg_color= '#000000')</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00850">simpleImage.php:850</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a1d8a0c4ee571db448e556caed12028d1"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a1d8a0c4ee571db448e556caed12028d1">abeautifulsite\SimpleImage\output</a></div><div class="ttdeci">output($format=null, $quality=null)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00610">simpleImage.php:610</a></div></div>
<div class="ttc" id="namespace_exception_html"><div class="ttname"><a href="namespace_exception.html">Exception</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a525e84a6d2e7d8e5ce1a30250f7f3df1"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a525e84a6d2e7d8e5ce1a30250f7f3df1">abeautifulsite\SimpleImage\desaturate</a></div><div class="ttdeci">desaturate($percentage=100)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00321">simpleImage.php:321</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a6ed959330a006f41f6c48bcbb9aa2f86"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a6ed959330a006f41f6c48bcbb9aa2f86">abeautifulsite\SimpleImage\get_meta_data</a></div><div class="ttdeci">get_meta_data()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01251">simpleImage.php:1251</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a585c262d16bad21a05af8804df8372b2"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a585c262d16bad21a05af8804df8372b2">abeautifulsite\SimpleImage\load</a></div><div class="ttdeci">load($filename)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00532">simpleImage.php:532</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a5795120b4b324bc4ca83f1e6fdce7d57"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a5795120b4b324bc4ca83f1e6fdce7d57">abeautifulsite\SimpleImage\$width</a></div><div class="ttdeci">$width</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00029">simpleImage.php:29</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a7af23605eb273c1084cbbf092bf69c50"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a7af23605eb273c1084cbbf092bf69c50">abeautifulsite\SimpleImage\contrast</a></div><div class="ttdeci">contrast($level)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00219">simpleImage.php:219</a></div></div>
<div class="ttc" id="dygraph-combined_8min_8js_html_ad725e11734b00f9bae46d9ca3cce440a"><div class="ttname"><a href="dygraph-combined_8min_8js.html#ad725e11734b00f9bae46d9ca3cce440a">next</a></div><div class="ttdeci">Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph prototype Dygraph Dygraph prototype Dygraph Dygraph prototype Dygraph Dygraph Dygraph prototype Dygraph Dygraph prototype Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Iterator prototype next</div><div class="ttdef"><b>Definition:</b> <a href="dygraph-combined_8min_8js_source.html#l00004">dygraph-combined.min.js:4</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a2514a0242e2b19b8b5fcbd7a79db5527"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a2514a0242e2b19b8b5fcbd7a79db5527">abeautifulsite\SimpleImage\get_original_info</a></div><div class="ttdeci">get_original_info()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00498">simpleImage.php:498</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_ac94ed3e74548edbf50883dc09790ab16"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#ac94ed3e74548edbf50883dc09790ab16">abeautifulsite\SimpleImage\fit_to_width</a></div><div class="ttdeci">fit_to_width($width)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00413">simpleImage.php:413</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a693a4a7bc49924eb8c7ca586c3fbc2ba"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a693a4a7bc49924eb8c7ca586c3fbc2ba">abeautifulsite\SimpleImage\blur</a></div><div class="ttdeci">blur($type= 'selective', $passes=1)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00182">simpleImage.php:182</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_ae0e4ad34b7a0b6a4b7e582c4676bd60f"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#ae0e4ad34b7a0b6a4b7e582c4676bd60f">abeautifulsite\SimpleImage\file_ext</a></div><div class="ttdeci">file_ext($filename)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01232">simpleImage.php:1232</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_ae69773d7ae7457ff1524174317f6ad62"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#ae69773d7ae7457ff1524174317f6ad62">abeautifulsite\SimpleImage\__construct</a></div><div class="ttdeci">__construct($filename=null, $width=null, $height=null, $color=null)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00045">simpleImage.php:45</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a8c5d5fb41d561409ca31b288b70d239e"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a8c5d5fb41d561409ca31b288b70d239e">abeautifulsite\SimpleImage\thumbnail</a></div><div class="ttdeci">thumbnail($width, $height=null, $focal= 'center')</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01146">simpleImage.php:1146</a></div></div>
<div class="ttc" id="namespaceabeautifulsite_html"><div class="ttname"><a href="namespaceabeautifulsite.html">abeautifulsite</a></div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00012">simpleImage.php:12</a></div></div>
<div class="ttc" id="wsc_8js_html_aee735810456865b981006adc11004e0f"><div class="ttname"><a href="wsc_8js.html#aee735810456865b981006adc11004e0f">load</a></div><div class="ttdeci">a load</div><div class="ttdef"><b>Definition:</b> <a href="wsc_8js_source.html#l00007">wsc.js:7</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aaced3f2b7cc91ab8891d9248139338cf"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aaced3f2b7cc91ab8891d9248139338cf">abeautifulsite\SimpleImage\best_fit</a></div><div class="ttdeci">best_fit($max_width, $max_height)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00144">simpleImage.php:144</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a8336e743a25f5301892696cd7c394f1f"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a8336e743a25f5301892696cd7c394f1f">abeautifulsite\SimpleImage\fit_to_height</a></div><div class="ttdeci">fit_to_height($height)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00396">simpleImage.php:396</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aae0bbd9a1af614db7c62fcfcdb906ecb"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aae0bbd9a1af614db7c62fcfcdb906ecb">abeautifulsite\SimpleImage\create</a></div><div class="ttdeci">create($width, $height=null, $color=null)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00252">simpleImage.php:252</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_af571c7cddbd8021822dc8a6c36bd4059"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#af571c7cddbd8021822dc8a6c36bd4059">abeautifulsite\SimpleImage\brightness</a></div><div class="ttdeci">brightness($level)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00205">simpleImage.php:205</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aabc8c1473621bfe3e064dd0a756c935e"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aabc8c1473621bfe3e064dd0a756c935e">abeautifulsite\SimpleImage\emboss</a></div><div class="ttdeci">emboss()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00362">simpleImage.php:362</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_ab133aa5541f0ae97c49d5729ace52c62"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#ab133aa5541f0ae97c49d5729ace52c62">abeautifulsite\SimpleImage\colorize</a></div><div class="ttdeci">colorize($color, $opacity)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00234">simpleImage.php:234</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_afc92209cb2a19193d46a9338b13a3bb9"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#afc92209cb2a19193d46a9338b13a3bb9">abeautifulsite\SimpleImage\sketch</a></div><div class="ttdeci">sketch()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00933">simpleImage.php:933</a></div></div>
<div class="ttc" id="raphael_8min_8js_html_a0fb8dfe8de5f08fa24757aa878a94529"><div class="ttname"><a href="raphael_8min_8js.html#a0fb8dfe8de5f08fa24757aa878a94529">image</a></div><div class="ttdeci">$a $a $a v v v v v image</div><div class="ttdef"><b>Definition:</b> <a href="raphael_8min_8js_source.html#l00002">raphael.min.js:2</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a0d40c1a117d25c5bae5f30edfdebefe8"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a0d40c1a117d25c5bae5f30edfdebefe8">abeautifulsite\SimpleImage\save</a></div><div class="ttdeci">save($filename=null, $quality=null, $format=null)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00881">simpleImage.php:881</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aa0cce094a549fbed2a9e7288bd15221f"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aa0cce094a549fbed2a9e7288bd15221f">abeautifulsite\SimpleImage\normalize_color</a></div><div class="ttdeci">normalize_color($color)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01422">simpleImage.php:1422</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_abb10ccd258503d273acaf265bf1b1535"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#abb10ccd258503d273acaf265bf1b1535">abeautifulsite\SimpleImage\get_width</a></div><div class="ttdeci">get_width()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00508">simpleImage.php:508</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aaa59492eca3655d941d74c92eff212e9"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aaa59492eca3655d941d74c92eff212e9">abeautifulsite\SimpleImage\fill</a></div><div class="ttdeci">fill($color= '#000000')</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00376">simpleImage.php:376</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a7b75b8778b5090f902def6b3d0ee0fcd"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a7b75b8778b5090f902def6b3d0ee0fcd">abeautifulsite\SimpleImage\text</a></div><div class="ttdeci">text($text, $font_file, $font_size=12, $color= '#000000', $position= 'center', $x_offset=0, $y_offset=0, $stroke_color=null, $stroke_size=null, $alignment=null, $letter_spacing=0)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00970">simpleImage.php:970</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a682af070180fbd1f3734653757403139"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a682af070180fbd1f3734653757403139">abeautifulsite\SimpleImage\pixelate</a></div><div class="ttdeci">pixelate($block_size=10)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00793">simpleImage.php:793</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a4f2623f77a0eb2993c39668604b9d028"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a4f2623f77a0eb2993c39668604b9d028">abeautifulsite\SimpleImage\mean_remove</a></div><div class="ttdeci">mean_remove()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00566">simpleImage.php:566</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a0ed80eb3d0f683447f8c163aba89cc84"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a0ed80eb3d0f683447f8c163aba89cc84">abeautifulsite\SimpleImage\auto_orient</a></div><div class="ttdeci">auto_orient()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00089">simpleImage.php:89</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_afbed21df0630ae4d62c6ba38edd6f9d1"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#afbed21df0630ae4d62c6ba38edd6f9d1">abeautifulsite\SimpleImage\flip</a></div><div class="ttdeci">flip($direction)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00430">simpleImage.php:430</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_aed0804dc7416329172ab55bcbf1d41b7"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#aed0804dc7416329172ab55bcbf1d41b7">abeautifulsite\SimpleImage\edges</a></div><div class="ttdeci">edges()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00351">simpleImage.php:351</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a0acd49b80218568ea04e7a5886373c54"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a0acd49b80218568ea04e7a5886373c54">abeautifulsite\SimpleImage\get_height</a></div><div class="ttdeci">get_height()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00461">simpleImage.php:461</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a1e67e72870ddf87f3d16b3010cd7d3f2"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a1e67e72870ddf87f3d16b3010cd7d3f2">abeautifulsite\SimpleImage\adaptive_resize</a></div><div class="ttdeci">adaptive_resize($width, $height=null)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00077">simpleImage.php:77</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a7ebc6366f3da2bf2af1608663fdb7a09"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a7ebc6366f3da2bf2af1608663fdb7a09">abeautifulsite\SimpleImage\smooth</a></div><div class="ttdeci">smooth($level)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00946">simpleImage.php:946</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a725590e68594a12d631830dfce494571"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a725590e68594a12d631830dfce494571">abeautifulsite\SimpleImage\imagecopymerge_alpha</a></div><div class="ttdeci">imagecopymerge_alpha($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h, $pct)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l01310">simpleImage.php:1310</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_acd08ab8d9a2213db91dc8a4cd533fedc"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#acd08ab8d9a2213db91dc8a4cd533fedc">abeautifulsite\SimpleImage\output_base64</a></div><div class="ttdeci">output_base64($format=null, $quality=null)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00664">simpleImage.php:664</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a6bb3cbd0b8cb4156b2521365fca79529"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a6bb3cbd0b8cb4156b2521365fca79529">abeautifulsite\SimpleImage\get_orientation</a></div><div class="ttdeci">get_orientation()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00471">simpleImage.php:471</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a4723159606519b101e408854bc65ee35"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a4723159606519b101e408854bc65ee35">abeautifulsite\SimpleImage\sepia</a></div><div class="ttdeci">sepia()</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00921">simpleImage.php:921</a></div></div>
<div class="ttc" id="namespace_simple_image_html"><div class="ttname"><a href="namespace_simple_image.html">SimpleImage</a></div></div>
<div class="ttc" id="classabeautifulsite_1_1_simple_image_html_a21c21cee2c0a9cd9e8965a684f50e8e8"><div class="ttname"><a href="classabeautifulsite_1_1_simple_image.html#a21c21cee2c0a9cd9e8965a684f50e8e8">abeautifulsite\SimpleImage\load_base64</a></div><div class="ttdeci">load_base64($base64string)</div><div class="ttdef"><b>Definition:</b> <a href="simple_image_8php_source.html#l00550">simpleImage.php:550</a></div></div>
<div class="ttc" id="dygraph-combined_8min_8js_html_a1c7cf6a4eec3c3c8174f789e514bdd69"><div class="ttname"><a href="dygraph-combined_8min_8js.html#a1c7cf6a4eec3c3c8174f789e514bdd69">resize</a></div><div class="ttdeci">Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph Dygraph Dygraph Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph prototype Dygraph Dygraph prototype resize</div><div class="ttdef"><b>Definition:</b> <a href="dygraph-combined_8min_8js_source.html#l00004">dygraph-combined.min.js:4</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="simple_image_8php.html">simpleImage.php</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
